<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>HPHS - High Performance HTTP Server</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: #fafafa;
            color: #333;
            line-height: 1.6;
        }
        
        .container {
            max-width: 900px;
            margin: 0 auto;
            padding: 60px 20px;
        }
        
        header {
            text-align: center;
            margin-bottom: 50px;
            padding-bottom: 30px;
            border-bottom: 1px solid #e0e0e0;
        }
        
        h1 {
            font-size: 2.5rem;
            font-weight: 300;
            color: #222;
            letter-spacing: 2px;
        }
        
        .tagline {
            color: #666;
            font-size: 1rem;
            margin-top: 10px;
        }
        
        .stats {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 20px;
            margin-bottom: 50px;
        }
        
        .stat-card {
            text-align: center;
            padding: 25px 15px;
            border: 1px solid #e0e0e0;
            border-radius: 4px;
            background: #fff;
        }
        
        .stat-value {
            font-size: 2rem;
            font-weight: 600;
            color: #333;
            display: block;
        }
        
        .stat-label {
            color: #888;
            font-size: 0.85rem;
            margin-top: 5px;
        }
        
        .section {
            margin-bottom: 40px;
        }
        
        .section h2 {
            font-size: 1.2rem;
            font-weight: 600;
            color: #333;
            margin-bottom: 20px;
            padding-bottom: 10px;
            border-bottom: 2px solid #333;
        }
        
        .arch-diagram {
            background: #f5f5f5;
            border: 1px solid #e0e0e0;
            border-radius: 4px;
            padding: 20px;
            font-family: 'Monaco', 'Menlo', 'Consolas', monospace;
            font-size: 0.75rem;
            line-height: 1.5;
            overflow-x: auto;
            color: #444;
        }
        
        .feature-list {
            list-style: none;
        }
        
        .feature-list li {
            padding: 12px 0;
            border-bottom: 1px solid #eee;
            display: flex;
            gap: 15px;
        }
        
        .feature-list li:last-child {
            border-bottom: none;
        }
        
        .feature-title {
            font-weight: 600;
            min-width: 180px;
            color: #333;
        }
        
        .feature-desc {
            color: #666;
        }
        
        .tech-stack {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
        }
        
        .tech-tag {
            background: #f0f0f0;
            color: #555;
            padding: 5px 12px;
            border-radius: 3px;
            font-size: 0.85rem;
        }
        
        footer {
            text-align: center;
            padding: 40px;
            color: #999;
            font-size: 0.85rem;
            border-top: 1px solid #e0e0e0;
            margin-top: 40px;
        }
        
        @media (max-width: 768px) {
            .stats { grid-template-columns: repeat(2, 1fr); }
            .feature-list li { flex-direction: column; gap: 5px; }
            .feature-title { min-width: auto; }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>HPHS</h1>
            <p class="tagline">High Performance HTTP Server · C++17 · Linux epoll</p>
        </header>
        
        <div class="stats">
            <div class="stat-card">
                <span class="stat-value">8.55M</span>
                <span class="stat-label">QPS Peak</span>
            </div>
            <div class="stat-card">
                <span class="stat-value">60K</span>
                <span class="stat-label">Connections</span>
            </div>
            <div class="stat-card">
                <span class="stat-value">&lt;100ms</span>
                <span class="stat-label">P50 Latency</span>
            </div>
            <div class="stat-card">
                <span class="stat-value">4-5</span>
                <span class="stat-label">CPU Cores</span>
            </div>
        </div>
        
        <div class="section">
            <h2>Architecture</h2>
            <pre class="arch-diagram">┌──────────────────────────────────────────────────────────────┐
│                         HttpServer                           │
│  ┌──────────────┐                                            │
│  │ResponseCache │ ← Preload static files at startup          │
│  └──────────────┘                                            │
├──────────────────────────────────────────────────────────────┤
│  ┌────────┐  ┌────────┐  ┌────────┐  ┌────────┐             │
│  │Worker 0│  │Worker 1│  │Worker 2│  │Worker 3│  ...        │
│  │ epoll  │  │ epoll  │  │ epoll  │  │ epoll  │             │
│  │ listen │  │ listen │  │ listen │  │ listen │             │
│  └───┬────┘  └───┬────┘  └───┬────┘  └───┬────┘             │
│      └───────────┴─────┬─────┴───────────┘                   │
│                        │                                      │
│               SO_REUSEPORT (Kernel Load Balancing)           │
└────────────────────────┼─────────────────────────────────────┘
                         │
                    ┌────┴────┐
                    │ Clients │
                    └─────────┘</pre>
        </div>
        
        <div class="section">
            <h2>Features</h2>
            <ul class="feature-list">
                <li>
                    <span class="feature-title">Multi-Reactor</span>
                    <span class="feature-desc">Each worker owns independent epoll + listen socket, kernel-level load balancing via SO_REUSEPORT</span>
                </li>
                <li>
                    <span class="feature-title">Zero-Copy I/O</span>
                    <span class="feature-desc">Stack-based parsing, writev for scatter-gather writes, sendfile for large files</span>
                </li>
                <li>
                    <span class="feature-title">Response Cache</span>
                    <span class="feature-desc">Pre-built HTTP responses at startup, skip parsing and disk I/O on cache hit</span>
                </li>
                <li>
                    <span class="feature-title">HTTP Pipelining</span>
                    <span class="feature-desc">Batch request processing with O(1) buffer cursor consumption</span>
                </li>
                <li>
                    <span class="feature-title">Connection Pool</span>
                    <span class="feature-desc">Pre-allocated 100K connection objects, zero malloc overhead under high load</span>
                </li>
                <li>
                    <span class="feature-title">Optimized epoll_ctl</span>
                    <span class="feature-desc">State tracking to avoid redundant syscalls</span>
                </li>
            </ul>
        </div>
        
        <div class="section">
            <h2>Tech Stack</h2>
            <div class="tech-stack">
                <span class="tech-tag">C++17</span>
                <span class="tech-tag">Linux epoll</span>
                <span class="tech-tag">SO_REUSEPORT</span>
                <span class="tech-tag">sendfile</span>
                <span class="tech-tag">writev</span>
                <span class="tech-tag">string_view</span>
                <span class="tech-tag">Edge-Triggered</span>
                <span class="tech-tag">Object Pool</span>
            </div>
        </div>
        
        <footer>
            <p>HPHS · High Performance HTTP Server · C++17</p>
        </footer>
    </div>
</body>
</html>
